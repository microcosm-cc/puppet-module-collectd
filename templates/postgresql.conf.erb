# Generated by Puppet
LoadPlugin "postgresql"

<Plugin "postgresql">
<% @queries.each do |query| -%>
  <Query <%=query['name']%>>
    Statement "<%=query['statement']%>"
    <Result>
      Type <%=query['type']%>
      InstancePrefix "<%=query['instance_prefix']%>"
      ValuesFrom <%=query['values_from']%>
    </Result>
  </Query>
<% end -%>
<% @databases.each do |database| -%>
  <Database "<%=database['name']%>">
  	Host "<%=database['host']%>"
  	Port "<%=database['port']%>"
  	User "<%=database['user']%>"
  	Password "<%=database['password']%>"
    # TODO: this should iterate over all queries
    Query <%=database['query']%>
    Query usage
    Query queries
    Query transactions
    Query disk_io
    Interval <%=database['interval']%>
  </Database>
<% end -%>
</Plugin>
